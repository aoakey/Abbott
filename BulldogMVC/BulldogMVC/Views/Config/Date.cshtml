@model BulldogMVC.Models.ConfigContol

@{
    ViewBag.Title = "Date";
    DateTime date = DateTime.Now;
    var value = Model.GetValue();
    if (Model.Default.Length > 0) {
        date = DateTime.Parse(Model.Default);   
    }     
    var day = date.Day;
    var month = date.Month;
    var year = date.Year;
    var minDate = (Model.Min.Length > 0 ? DateTime.Parse(Model.Min) : DateTime.Now.AddYears(-100));
    var maxDate = (Model.Max.Length > 0 ? DateTime.Parse(Model.Max) : DateTime.Now.AddYears(-100));
    var minYear = minDate.Year;
    var maxYear = maxDate.Year;
    var modelId = Model.Id;
}

<div id="ctrl_@Model.Id" class="control date">
    
    <span class="text">@Html.DisplayFor(model => model.Text)</span>
    <span class="description">@Html.DisplayFor(model => model.Description)</span>
    <input type="hidden" id="date_@Model.Id" name="date_@Model.Id" class="DateValue" />

    <span class="controls-container">
        <span class="id" style="display:none;">@modelId</span>
        <span class="minYear" style="display:none;">@minYear</span>
        <span class="maxYear" style="display:none;">@maxYear</span>
        <span class="_day" style="display:none;">@day</span>
        <span class="_month" style="display:none;">@month</span>
        <span class="_year" style="display:none;">@year</span>

        <select id="date_month_@Model.Id" name="date_month_@Model.Id" size="1" class="month">
            <option value="1">January</option>
            <option value="2">February</option>
            <option value="3">March</option>
            <option value="4">April</option>
            <option value="5">May</option>
            <option value="6">June</option>
            <option value="7">July</option>
            <option value="8">August</option>
            <option value="9">September</option>
            <option value="10">October</option>
            <option value="11">November</option>
            <option value="12">December</option>                    
        </select>
        <select size="1" class="day"></select>
        <select size="1" class="year"></select>
    </span>
</div>
